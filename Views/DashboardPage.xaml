<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="BrainWave.APP.Views.DashboardPage"
             Title="Dashboard"
             BackgroundColor="{AppThemeBinding Light=#F8F9FA, Dark=#1A1A1A}">
    
    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">
            
            <!-- Welcome Header -->
            <Frame BackgroundColor="{AppThemeBinding Light=#4A90E2, Dark=#2C5AA0}" 
                   CornerRadius="16" 
                   Padding="20" 
                   Margin="0,0,0,20">
                <Grid ColumnDefinitions="*,Auto,Auto">
                    <VerticalStackLayout Grid.Column="0">
                        <Label Text="Welcome to BrainWave" 
                               FontSize="24" 
                               FontAttributes="Bold" 
                               TextColor="White" 
                               HorizontalOptions="Center" />
                        <Label Text="Your productivity companion" 
                               FontSize="14" 
                               TextColor="White" 
                               Opacity="0.9" 
                               HorizontalOptions="Center" />
                    </VerticalStackLayout>
                    <Button Grid.Column="1"
                            Text="Refresh"
                            BackgroundColor="{AppThemeBinding Light=#FFFFFF, Dark=#FFFFFF}"
                            TextColor="{AppThemeBinding Light=#4A90E2, Dark=#4A90E2}"
                            CornerRadius="8"
                            FontSize="12"
                            FontAttributes="Bold"
                            Padding="12,8"
                            VerticalOptions="Center"
                            Command="{Binding RefreshCommand}" />
                    <Button Grid.Column="2"
                            Text="❓"
                            BackgroundColor="{AppThemeBinding Light=#FFFFFF, Dark=#FFFFFF}"
                            TextColor="{AppThemeBinding Light=#4A90E2, Dark=#4A90E2}"
                            CornerRadius="8"
                            FontSize="16"
                            FontAttributes="Bold"
                            Padding="12,8"
                            VerticalOptions="Center"
                            Margin="8,0,0,0"
                            Clicked="HelpButton_Clicked" />
                </Grid>
            </Frame>

            <!-- Quick Stats -->
            <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto" ColumnSpacing="12" RowSpacing="12">
                <Frame Grid.Row="0" Grid.Column="0" 
                       BackgroundColor="{AppThemeBinding Light=#E8F5E8, Dark=#1B5E20}" 
                       CornerRadius="12" 
                       Padding="16">
                    <VerticalStackLayout>
                        <Label Text="Active Tasks" FontSize="12" TextColor="{AppThemeBinding Light=#2E7D32, Dark=#A5D6A7}" />
                        <Label Text="{Binding ActiveTasksCount}" FontSize="24" FontAttributes="Bold" TextColor="{AppThemeBinding Light=#1B5E20, Dark=#C8E6C9}" />
                    </VerticalStackLayout>
                </Frame>
                
                <Frame Grid.Row="0" Grid.Column="1" 
                       BackgroundColor="{AppThemeBinding Light=#FFF3E0, Dark=#E65100}" 
                       CornerRadius="12" 
                       Padding="16">
                    <VerticalStackLayout>
                        <Label Text="Due Today" FontSize="12" TextColor="{AppThemeBinding Light=#F57C00, Dark=#FFB74D}" />
                        <Label Text="{Binding DueTodayCount}" FontSize="24" FontAttributes="Bold" TextColor="{AppThemeBinding Light=#E65100, Dark=#FFCC02}" />
                    </VerticalStackLayout>
                </Frame>
                
                <Frame Grid.Row="1" Grid.Column="0" 
                       BackgroundColor="{AppThemeBinding Light=#E3F2FD, Dark=#0D47A1}" 
                       CornerRadius="12" 
                       Padding="16">
                    <VerticalStackLayout>
                        <Label Text="Completed" FontSize="12" TextColor="{AppThemeBinding Light=#1976D2, Dark=#90CAF9}" />
                        <Label Text="{Binding CompletedTasksCount}" FontSize="24" FontAttributes="Bold" TextColor="{AppThemeBinding Light=#0D47A1, Dark=#BBDEFB}" />
                    </VerticalStackLayout>
                </Frame>
                
                <Frame Grid.Row="1" Grid.Column="1" 
                       BackgroundColor="{AppThemeBinding Light=#F3E5F5, Dark=#4A148C}" 
                       CornerRadius="12" 
                       Padding="16">
                    <VerticalStackLayout>
                        <Label Text="Badges" FontSize="12" TextColor="{AppThemeBinding Light=#7B1FA2, Dark=#CE93D8}" />
                        <Label Text="{Binding BadgesCount}" FontSize="24" FontAttributes="Bold" TextColor="{AppThemeBinding Light=#4A148C, Dark=#E1BEE7}" />
                    </VerticalStackLayout>
                </Frame>
            </Grid>

            <!-- Quick Actions -->
            <Label Text="Quick Actions" FontSize="18" FontAttributes="Bold" TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}" />
            <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto" ColumnSpacing="12" RowSpacing="12">
                <Button Grid.Row="0" Grid.Column="0" 
                        Text="➕ New Task" 
                        BackgroundColor="{AppThemeBinding Light=#4CAF50, Dark=#388E3C}" 
                        TextColor="White" 
                        CornerRadius="12" 
                        FontAttributes="Bold"
                        Clicked="NewTask_Clicked" />
                <Button Grid.Row="0" Grid.Column="1" 
                        Text="🔔 Reminders" 
                        BackgroundColor="{AppThemeBinding Light=#FF9800, Dark=#F57C00}" 
                        TextColor="White" 
                        CornerRadius="12" 
                        FontAttributes="Bold"
                        Clicked="Reminders_Clicked" />
                <Button Grid.Row="1" Grid.Column="0" 
                        Text="👥 Collaborate" 
                        BackgroundColor="{AppThemeBinding Light=#2196F3, Dark=#1976D2}" 
                        TextColor="White" 
                        CornerRadius="12" 
                        FontAttributes="Bold"
                        Clicked="Collab_Clicked" />
                <Button Grid.Row="1" Grid.Column="1" 
                        Text="👤 Profile" 
                        BackgroundColor="{AppThemeBinding Light=#9C27B0, Dark=#7B1FA2}" 
                        TextColor="White" 
                        CornerRadius="12" 
                        FontAttributes="Bold"
                        Clicked="Profile_Clicked" />
            </Grid>

            <!-- Upcoming Tasks -->
            <Label Text="Upcoming Tasks" FontSize="18" FontAttributes="Bold" TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}" />
            <CollectionView x:Name="UpcomingList" ItemsSource="{Binding Upcoming}">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame BackgroundColor="{AppThemeBinding Light=#FFFFFF, Dark=#2D2D2D}" 
                               CornerRadius="12" 
                               Padding="16" 
                               Margin="0,6"
                               HasShadow="True">
                            <VerticalStackLayout Spacing="8">
                                <HorizontalStackLayout>
                                    <Label Text="{Binding Title}" 
                                           FontSize="16" 
                                           FontAttributes="Bold" 
                                           TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}" 
                                           VerticalOptions="Center" />
                                    <Frame BackgroundColor="{Binding Priority, Converter={StaticResource PriorityToColorConverter}}" 
                                           CornerRadius="8" 
                                           Padding="8,4" 
                                           HasShadow="False">
                                        <Label Text="{Binding Priority}" 
                                               TextColor="White" 
                                               FontSize="10" 
                                               FontAttributes="Bold"
                                               VerticalOptions="Center" />
                                    </Frame>
                                </HorizontalStackLayout>
                                
                                <Label Text="{Binding Description}" 
                                       LineBreakMode="TailTruncation" 
                                       TextColor="{AppThemeBinding Light=#666666, Dark=#CCCCCC}" 
                                       FontSize="14" />
                                
                                <HorizontalStackLayout Spacing="12">
                                    <Label Text="{Binding DueDate, StringFormat='📅 {0:MMM dd, yyyy}'}" 
                                           FontSize="12" 
                                           TextColor="{AppThemeBinding Light=#888888, Dark=#AAAAAA}" />
                                    <Label Text="•" 
                                           FontSize="12" 
                                           TextColor="{AppThemeBinding Light=#888888, Dark=#AAAAAA}" />
                                    <Label Text="{Binding Status}" 
                                           FontSize="12" 
                                           TextColor="{AppThemeBinding Light=#888888, Dark=#AAAAAA}" />
                                </HorizontalStackLayout>
                            </VerticalStackLayout>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!-- Logout Button -->
            <Frame BackgroundColor="{AppThemeBinding Light=#FFFFFF, Dark=#2D2D2D}" 
                   CornerRadius="16" 
                   Padding="20" 
                   Margin="0,20,0,0"
                   HasShadow="True">
                <Button Text="🚪 Logout" 
                        Command="{Binding LogoutCommand}" 
                        BackgroundColor="{AppThemeBinding Light=#FF6B6B, Dark=#CC4444}" 
                        TextColor="White" 
                        CornerRadius="12" 
                        FontSize="16" 
                        FontAttributes="Bold" 
                        HeightRequest="50" />
            </Frame>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>