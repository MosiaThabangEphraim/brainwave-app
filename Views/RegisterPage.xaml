<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:BrainWave.APP.ViewModels"
             x:Class="BrainWave.APP.Views.RegisterPage"
             Title="Register"
             BackgroundColor="{AppThemeBinding Light=#F8F9FA, Dark=#1A1A1A}">

	<ContentPage.BindingContext>
		<vm:RegisterViewModel />
	</ContentPage.BindingContext>

	<ScrollView>
		<VerticalStackLayout Padding="40" Spacing="30" VerticalOptions="Center">
			
			<!-- Logo/Header -->
			<Frame BackgroundColor="{AppThemeBinding Light=#4A90E2, Dark=#2C5AA0}" 
				   CornerRadius="20" 
				   Padding="30" 
				   Margin="0,0,0,40"
				   HorizontalOptions="Center">
				<VerticalStackLayout>
					<Label Text="🧠" 
						   FontSize="48" 
						   HorizontalOptions="Center" />
					<Label Text="Join BrainWave" 
						   FontSize="28" 
						   FontAttributes="Bold" 
						   TextColor="White" 
						   HorizontalOptions="Center" />
					<Label Text="Start your productivity journey" 
						   FontSize="14" 
						   TextColor="White" 
						   Opacity="0.9" 
						   HorizontalOptions="Center" />
				</VerticalStackLayout>
			</Frame>

			<!-- Registration Form -->
			<Frame BackgroundColor="{AppThemeBinding Light=#FFFFFF, Dark=#2D2D2D}" 
				   CornerRadius="16" 
				   Padding="30" 
				   HasShadow="True">
				<VerticalStackLayout Spacing="20">
					<Label Text="Create Your Account" 
                   FontSize="24"
						   FontAttributes="Bold" 
						   TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}" 
                   HorizontalOptions="Center" />

					<Label Text="Join thousands of productive users" 
						   FontSize="14" 
						   TextColor="{AppThemeBinding Light=#666666, Dark=#CCCCCC}" 
						   HorizontalOptions="Center" />

					<!-- Profile Picture Section -->
					<Frame BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=#404040}" 
						   CornerRadius="12" 
						   Padding="20" 
						   HorizontalOptions="Center">
						<VerticalStackLayout Spacing="10">
							                            <Frame BackgroundColor="Transparent" 
                                   CornerRadius="40" 
                                   Padding="0" 
                                   WidthRequest="80" 
                                   HeightRequest="80" 
                                   HasShadow="False">
                                <Image x:Name="ProfileImage" 
                                       Source="{Binding ProfileImageSource}" 
                                       Aspect="AspectFill" />
                            </Frame>
							<Button Text="📷 Add Photo" 
									Command="{Binding SelectImageCommand}" 
									BackgroundColor="{AppThemeBinding Light=#4A90E2, Dark=#2C5AA0}" 
									TextColor="White" 
									CornerRadius="8" 
									FontSize="12" />
						</VerticalStackLayout>
					</Frame>

					<!-- Form Fields -->
					<Frame BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=#404040}" 
						   CornerRadius="12" 
						   Padding="16" 
						   HasShadow="False">
						<Entry Placeholder="First Name" 
							   Text="{Binding FirstName}" 
							   BackgroundColor="Transparent" 
							   TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}"
							   PlaceholderColor="{AppThemeBinding Light=#999999, Dark=#AAAAAA}" />
					</Frame>
					<Label Text="{Binding FirstNameError}" 
						   TextColor="Red" 
						   FontSize="12" 
						   IsVisible="{Binding FirstNameError, Converter={StaticResource StringToBoolConverter}}" />

										<Frame BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=#404040}" 
CornerRadius="12" 
						   Padding="16" 
						   HasShadow="False">
						<Entry Placeholder="Last Name" 
							   Text="{Binding LastName}" 
							   BackgroundColor="Transparent" 
							   TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}"
							   PlaceholderColor="{AppThemeBinding Light=#999999, Dark=#AAAAAA}" />
					</Frame>
					<Label Text="{Binding LastNameError}" 
						   TextColor="Red" 
						   FontSize="12" 
						   IsVisible="{Binding LastNameError, Converter={StaticResource StringToBoolConverter}}" />

					<Frame BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=#404040}" 
						   CornerRadius="12" 
						   Padding="16" 
						   HasShadow="False">
						<Entry Placeholder="Email Address" 
							   Text="{Binding Email}" 
							   Keyboard="Email" 
							   BackgroundColor="Transparent" 
							   TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}"
							   PlaceholderColor="{AppThemeBinding Light=#999999, Dark=#AAAAAA}" />
					</Frame>
					<Label Text="{Binding EmailError}" 
						   TextColor="Red" 
						   FontSize="12" 
						   IsVisible="{Binding EmailError, Converter={StaticResource StringToBoolConverter}}" />

					<Frame BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=#404040}" 
						   CornerRadius="12" 
						   Padding="16" 
						   HasShadow="False">
						<Entry Placeholder="Confirm Email Address" 
							   Text="{Binding ConfirmEmail}" 
							   Keyboard="Email" 
							   BackgroundColor="Transparent" 
							   TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}"
							   PlaceholderColor="{AppThemeBinding Light=#999999, Dark=#AAAAAA}" />
					</Frame>
					<Label Text="{Binding ConfirmEmailError}" 
						   TextColor="Red" 
						   FontSize="12" 
						   IsVisible="{Binding ConfirmEmailError, Converter={StaticResource StringToBoolConverter}}" />

					<Frame BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=#404040}" 
						   CornerRadius="12" 
						   Padding="16" 
						   HasShadow="False">
						<Grid ColumnDefinitions="*,Auto">
							<Entry Grid.Column="0"
								   Placeholder="Password" 
								   Text="{Binding Password}" 
								   IsPassword="{Binding IsPasswordVisible, Converter={StaticResource InvertedBoolConverter}}" 
								   BackgroundColor="Transparent" 
								   TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}"
								   PlaceholderColor="{AppThemeBinding Light=#999999, Dark=#AAAAAA}" />
							<Button Grid.Column="1"
									Text="{Binding PasswordVisibilityIcon}"
									Command="{Binding TogglePasswordVisibilityCommand}"
									BackgroundColor="Transparent"
									TextColor="{AppThemeBinding Light=#666666, Dark=#CCCCCC}"
									FontSize="16"
									Padding="8,0"
									BorderWidth="0" />
						</Grid>
					</Frame>

					<!-- Password Requirements -->
					<Frame BackgroundColor="{AppThemeBinding Light=#E8F4FD, Dark=#1A3A5C}" 
						   CornerRadius="8" 
						   Padding="12" 
						   HasShadow="False">
						<VerticalStackLayout Spacing="4">
							<Label Text="Password Requirements:" 
								   FontSize="12" 
								   FontAttributes="Bold" 
								   TextColor="{AppThemeBinding Light=#2C5AA0, Dark=#90CAF9}" />
							<Label Text="• At least 8 characters long" 
								   FontSize="11" 
								   TextColor="{Binding IsPasswordLengthValid, Converter={StaticResource BoolToTextColorConverter}}" />
							<Label Text="• Contains at least one number" 
								   FontSize="11" 
								   TextColor="{Binding IsPasswordNumberValid, Converter={StaticResource BoolToTextColorConverter}}" />
							<Label Text="• Contains uppercase letter" 
								   FontSize="11" 
								   TextColor="{Binding IsPasswordUppercaseValid, Converter={StaticResource BoolToTextColorConverter}}" />
							<Label Text="• Contains lowercase letter" 
								   FontSize="11" 
								   TextColor="{Binding IsPasswordLowercaseValid, Converter={StaticResource BoolToTextColorConverter}}" />
							<Label Text="• Contains special character" 
								   FontSize="11" 
								   TextColor="{Binding IsPasswordSpecialValid, Converter={StaticResource BoolToTextColorConverter}}" />
						</VerticalStackLayout>
					</Frame>

					<Frame BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=#404040}" 
						   CornerRadius="12" 
						   Padding="16" 
						   HasShadow="False">
						<Grid ColumnDefinitions="*,Auto">
							<Entry Grid.Column="0"
								   Placeholder="Confirm Password" 
								   Text="{Binding ConfirmPassword}" 
								   IsPassword="{Binding IsConfirmPasswordVisible, Converter={StaticResource InvertedBoolConverter}}" 
								   BackgroundColor="Transparent" 
								   TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}"
								   PlaceholderColor="{AppThemeBinding Light=#999999, Dark=#AAAAAA}" />
							<Button Grid.Column="1"
									Text="{Binding ConfirmPasswordVisibilityIcon}"
									Command="{Binding ToggleConfirmPasswordVisibilityCommand}"
									BackgroundColor="Transparent"
									TextColor="{AppThemeBinding Light=#666666, Dark=#CCCCCC}"
									FontSize="16"
									Padding="8,0"
									BorderWidth="0" />
						</Grid>
					</Frame>
					<Label Text="{Binding ConfirmPasswordError}" 
						   TextColor="Red" 
						   FontSize="12" 
						   IsVisible="{Binding ConfirmPasswordError, Converter={StaticResource StringToBoolConverter}}" />

					<!-- Role Selection -->
					<Label Text="Select Your Role" 
						   FontSize="16" 
						   FontAttributes="Bold" 
						   TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}" />
					
					<Grid ColumnDefinitions="*,*" ColumnSpacing="12">
						<Frame Grid.Column="0" 
							   BackgroundColor="{Binding IsStudentSelected, Converter={StaticResource BoolToColorConverter}}" 
							   CornerRadius="12" 
							   Padding="20" 
							   HasShadow="True">
							<VerticalStackLayout Spacing="8">
								<Label Text="🎓" FontSize="32" HorizontalOptions="Center" />
								<Label Text="Student" 
									   FontSize="16" 
									   FontAttributes="Bold" 
									   TextColor="{Binding IsStudentSelected, Converter={StaticResource BoolToTextColorConverter}}" 
									   HorizontalOptions="Center" />
								<Label Text="Perfect for learning and academic tasks" 
									   FontSize="12" 
									   TextColor="{Binding IsStudentSelected, Converter={StaticResource BoolToTextColorConverter}}" 
									   HorizontalOptions="Center" 
									   HorizontalTextAlignment="Center" />
							</VerticalStackLayout>
							<Frame.GestureRecognizers>
								<TapGestureRecognizer Command="{Binding SelectStudentCommand}" />
							</Frame.GestureRecognizers>
						</Frame>

						<Frame Grid.Column="1" 
							   BackgroundColor="{Binding IsProfessionalSelected, Converter={StaticResource BoolToColorConverter}}" 
							   CornerRadius="12" 
							   Padding="20" 
							   HasShadow="True">
							<VerticalStackLayout Spacing="8">
								<Label Text="💼" FontSize="32" HorizontalOptions="Center" />
								<Label Text="Professional" 
									   FontSize="16" 
									   FontAttributes="Bold" 
									   TextColor="{Binding IsProfessionalSelected, Converter={StaticResource BoolToTextColorConverter}}" 
									   HorizontalOptions="Center" />
								<Label Text="Ideal for work and business projects" 
									   FontSize="12" 
									   TextColor="{Binding IsProfessionalSelected, Converter={StaticResource BoolToTextColorConverter}}" 
									   HorizontalOptions="Center" 
									   HorizontalTextAlignment="Center" />
							</VerticalStackLayout>
							<Frame.GestureRecognizers>
								<TapGestureRecognizer Command="{Binding SelectProfessionalCommand}" />
							</Frame.GestureRecognizers>
						</Frame>
					</Grid>

					<Button Text="Create Account" 
                    Command="{Binding RegisterCommand}"
							BackgroundColor="{AppThemeBinding Light=#4A90E2, Dark=#2C5AA0}" 
							TextColor="White" 
							CornerRadius="12" 
							FontSize="16" 
							FontAttributes="Bold" 
							Padding="20" 
                    IsEnabled="{Binding IsBusy, Converter={StaticResource InvertedBoolConverter}}" />

					<ActivityIndicator IsVisible="{Binding IsBusy}" 
									  IsRunning="{Binding IsBusy}" 
									  Color="{AppThemeBinding Light=#4A90E2, Dark=#2C5AA0}" />

			<Label Text="{Binding ErrorMessage}" 
                   TextColor="Red" 
                   HorizontalOptions="Center"
						   FontSize="14" 
                   IsVisible="{Binding ErrorMessage, Converter={StaticResource StringToBoolConverter}}" />

					<Button Text="Already have an account? Sign In" 
                    Command="{Binding GoToLoginCommand}" 
                    BackgroundColor="Transparent" 
							TextColor="{AppThemeBinding Light=#4A90E2, Dark=#90CAF9}" 
							FontSize="14" />
				</VerticalStackLayout>
			</Frame>
		</VerticalStackLayout>
	</ScrollView>
</ContentPage>
