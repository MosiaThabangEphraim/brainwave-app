<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:BrainWave.APP.ViewModels"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             x:Class="BrainWave.APP.Views.CreateReminderPage"
             Title="Create Reminder"
             BackgroundColor="{AppThemeBinding Light=#F8F9FA, Dark=#1A1A1A}">


    <ScrollView Padding="20">
        <VerticalStackLayout Spacing="16">
            
            <Label Text="Create New Reminder" 
                   FontSize="24" 
                   FontAttributes="Bold" 
                   TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}" 
                   HorizontalOptions="Center" />
            
            <!-- Task Selection -->
            <Frame BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=#404040}" 
                   CornerRadius="12" 
                   Padding="16" 
                   HasShadow="False">
                <VerticalStackLayout Spacing="4">
                    <Label Text="📋 Select Task *" 
                           FontSize="12" 
                           FontAttributes="Bold" 
                           TextColor="{AppThemeBinding Light=#666666, Dark=#CCCCCC}" />
                    <Picker x:Name="TaskPicker"
                            ItemsSource="{Binding AvailableTasks}"
                            ItemDisplayBinding="{Binding Title}"
                            SelectedItem="{Binding SelectedTask}"
                            BackgroundColor="Transparent"
                            TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}"
                            FontSize="14"
                            Title="Choose a task...">
                    </Picker>
                </VerticalStackLayout>
            </Frame>


            <!-- Date and Time Selection -->
            <Frame BackgroundColor="{AppThemeBinding Light=#FFF3E0, Dark=#E65100}" 
                   CornerRadius="12" 
                   Padding="16" 
                   HasShadow="False">
                <VerticalStackLayout Spacing="12">
                    <Label Text="⏰ Set Reminder Date &amp; Time" 
                           FontSize="14" 
                           FontAttributes="Bold" 
                           TextColor="{AppThemeBinding Light=#F57C00, Dark=#FFB74D}"
                           HorizontalOptions="Center" />
                    
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="12">
                        <Frame Grid.Column="0" 
                               BackgroundColor="{AppThemeBinding Light=#FFFFFF, Dark=#424242}" 
                               CornerRadius="8" 
                               Padding="12" 
                               HasShadow="False">
                            <VerticalStackLayout>
                                <Label Text="📅 Date" 
                                       FontSize="12" 
                                       FontAttributes="Bold" 
                                       TextColor="{AppThemeBinding Light=#F57C00, Dark=#FFB74D}"
                                       HorizontalOptions="Start" />
                                <DatePicker Date="{Binding Editing.ReminderDate}" 
                                            BackgroundColor="Transparent" 
                                            TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}"
                                            FontSize="14"
                                            Format="MMM dd, yyyy"
                                            MinimumDate="{Binding Source={x:Static sys:DateTime.Today}}"
                                            x:Name="ReminderDatePicker"
                                            DateSelected="ReminderDatePicker_DateSelected" />
                            </VerticalStackLayout>
                        </Frame>
                        
                        <Frame Grid.Column="1" 
                               BackgroundColor="{AppThemeBinding Light=#FFFFFF, Dark=#424242}" 
                               CornerRadius="8" 
                               Padding="12" 
                               HasShadow="False">
                            <VerticalStackLayout>
                                <Label Text="🕐 Time" 
                                       FontSize="12" 
                                       FontAttributes="Bold" 
                                       TextColor="{AppThemeBinding Light=#F57C00, Dark=#FFB74D}"
                                       HorizontalOptions="Start" />
                                <TimePicker x:Name="ReminderTimePicker"
                                            Time="{Binding Editing.ReminderTime.TimeOfDay, Mode=TwoWay}"
                                            TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}"
                                            BackgroundColor="Transparent"
                                            FontSize="14" />
                            </VerticalStackLayout>
                        </Frame>
                    </Grid>
                </VerticalStackLayout>
            </Frame>

            <!-- Action Buttons -->
            <Grid ColumnDefinitions="*,*" ColumnSpacing="12">
                <Button Grid.Column="0"
                        Text="Create Reminder" 
                        Command="{Binding CreateCommand}" 
                        BackgroundColor="{AppThemeBinding Light=#4A90E2, Dark=#2C5AA0}" 
                        TextColor="White" 
                        CornerRadius="12" 
                        FontSize="16" 
                        FontAttributes="Bold" 
                        HeightRequest="50"
                        IsEnabled="{Binding IsBusy, Converter={StaticResource InvertedBoolConverter}}" />
                
                <Button Grid.Column="1"
                        Text="Cancel" 
                        Command="{Binding CancelCommand}" 
                        BackgroundColor="{AppThemeBinding Light=#6C757D, Dark=#495057}" 
                        TextColor="White" 
                        CornerRadius="12" 
                        FontSize="16" 
                        FontAttributes="Bold" 
                        HeightRequest="50" />
            </Grid>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>

